# MemoLoop - AI é©±åŠ¨çš„å­¦ä¹ åŠ©æ‰‹

å®Œæ•´çš„ AI å­¦ä¹ å¹³å°ï¼Œé›†æˆç¬”è®°ã€è‡ªåŠ¨å‡ºé¢˜å’Œæ™ºèƒ½é—®ç­”ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

1. **ç¬”è®°ç¼–è¾‘å™¨** (`/`)
   - å¯Œæ–‡æœ¬ç¼–è¾‘ï¼ˆæ”¯æŒåŠ ç²—ã€æ–œä½“ã€æ ‡é¢˜ï¼‰
   - è‡ªåŠ¨ä¿å­˜ç¬”è®°åˆ° Supabase
   - æ”¯æŒ HTML å†…å®¹

2. **AI æé—®** (`/chat`)
   - åŸºäºä½ çš„ç¬”è®°è¿›è¡Œæ™ºèƒ½é—®ç­”
   - RAG æŠ€æœ¯ï¼šç³»ç»Ÿè‡ªåŠ¨æ£€ç´¢ç›¸å…³ç¬”è®°å¹¶ä½œä¸ºä¸Šä¸‹æ–‡
   - æµå¼å“åº”ï¼Œå®æ—¶æ˜¾ç¤º AI å›ç­”
   - å®Œæ•´çš„å¯¹è¯å†å²è®°å½•

3. **è‡ªåŠ¨å‡ºé¢˜** (`/quiz/[noteId]`)
   - æ ¹æ®ç¬”è®°å†…å®¹è‡ªåŠ¨ç”Ÿæˆ 3 é“å¤šé€‰é¢˜
   - æ”¯æŒé€é¢˜ä½œç­”
   - å®æ—¶åé¦ˆå’Œæˆç»©ç»Ÿè®¡
   - æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆè§£æ

4. **ç¬”è®°ç®¡ç†** (`/notes`)
   - æŸ¥çœ‹æ‰€æœ‰ç¬”è®°çš„åˆ—è¡¨
   - ç¬”è®°å¡ç‰‡é¢„è§ˆ
   - å¿«é€Ÿåˆ é™¤ç¬”è®°
   - ä¸€é”®è·³è½¬åˆ°è¯¦æƒ…ã€æµ‹éªŒæˆ–ç¼–è¾‘

5. **ç¬”è®°è¯¦æƒ…** (`/notes/[noteId]`)
   - å®Œæ•´çš„ç¬”è®°å†…å®¹å±•ç¤º
   - æ”¯æŒç”Ÿæˆè¯¥ç¬”è®°çš„æµ‹éªŒ
   - æŸ¥çœ‹ç¬”è®°åˆ›å»ºæ—¶é—´

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯
- **Next.js 16** (App Router)
- **Prisma ORM** + Supabase PostgreSQL
- **Google Gemini 2.0 Flash** (AI æ¨¡å‹)
- **pgvector** (å‘é‡å­˜å‚¨)

### å‰ç«¯
- **React 19** + TypeScript
- **TailwindCSS** æ ·å¼
- **Lucide Icons** å›¾æ ‡åº“
- **TipTap Editor** å¯Œæ–‡æœ¬ç¼–è¾‘

### AI åŠŸèƒ½
- **å‘é‡åŒ–** (text-embedding-004)
- **RAG æ£€ç´¢** (å‘é‡ç›¸ä¼¼åº¦æœç´¢)
- **ç”Ÿæˆ** (gemini-2.0-flash æ¨¡å‹)

## ğŸ“‹ ä½¿ç”¨æµç¨‹

### 1. åˆ›å»ºç¬”è®°
```
ä¸»é¡µ (/) 
  â†’ è¾“å…¥æ ‡é¢˜
  â†’ åœ¨ç¼–è¾‘å™¨ä¸­è¾“å…¥å†…å®¹
  â†’ ç‚¹å‡»"ä¿å­˜ç¬”è®°"
  â†’ ç¬”è®°è‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆåŒ…æ‹¬å‘é‡ï¼‰
```

### 2. æé—® AI
```
ç‚¹å‡»"æé—® AI"æŒ‰é’®
  â†’ è¿›å…¥ /chat é¡µé¢
  â†’ è¾“å…¥é—®é¢˜ï¼ˆç³»ç»Ÿä¼šåŸºäºä½ çš„ç¬”è®°å›ç­”ï¼‰
  â†’ çœ‹ AI æµå¼ç”Ÿæˆçš„å›ç­”
  â†’ ç»§ç»­æé—®å…¶ä»–é—®é¢˜
```

### 3. ç”Ÿæˆæµ‹éªŒ
```
æ–¹æ³• A: åœ¨ç¼–è¾‘å™¨ä¸­ä¿å­˜ç¬”è®°åï¼Œç‚¹å‡»"ç”Ÿæˆæµ‹éªŒ"
æ–¹æ³• B: è¿›å…¥ /notes åˆ—è¡¨ï¼Œç‚¹å‡»ç¬”è®°å¡ç‰‡çš„"æµ‹éªŒ"æŒ‰é’®
  â†’ è¿›å…¥ /quiz/[noteId] é¡µé¢
  â†’ è‡ªåŠ¨ç”Ÿæˆ 3 é“å¤šé€‰é¢˜
  â†’ é€é¢˜ä½œç­”
  â†’ æŸ¥çœ‹æˆç»©å’Œè§£æ
```

### 4. ç®¡ç†ç¬”è®°
```
ç‚¹å‡»ä¾§è¾¹æ "æˆ‘çš„ç¬”è®°"
  â†’ è¿›å…¥ /notes é¡µé¢
  â†’ çœ‹æ‰€æœ‰ç¬”è®°çš„åˆ—è¡¨
  â†’ ç‚¹å‡»"æŸ¥çœ‹"è¿›å…¥è¯¦æƒ…
  â†’ ç‚¹å‡»"æµ‹éªŒ"ç”Ÿæˆæµ‹è¯•
  â†’ ç‚¹å‡»åˆ é™¤æŒ‰é’®åˆ é™¤ç¬”è®°
```

## ğŸ”§ ç¯å¢ƒé…ç½®

### å¿…éœ€çš„ç¯å¢ƒå˜é‡ (`.env.local`)

```env
# Supabase PostgreSQL
DATABASE_URL="postgresql://user:password@host:port/database?sslmode=require&pgbouncer=true"
DATABASE_DIRECT_URL="postgresql://user:password@host:port/database"

# Google Generative AI API Key
GOOGLE_GENERATIVE_AI_API_KEY=your_api_key_here
```

### åˆå§‹åŒ–æ­¥éª¤

1. **å¯ç”¨ pgvector æ‰©å±•**
   ```sql
   CREATE EXTENSION IF NOT EXISTS vector;
   ```

2. **éƒ¨ç½² Prisma Schema**
   ```bash
   npx prisma db push
   ```

3. **ç”Ÿæˆ Prisma å®¢æˆ·ç«¯**
   ```bash
   npx prisma generate
   ```

## ğŸ“Š æ•°æ®åº“ Schema

### User è¡¨
```prisma
model User {
  id        String   @id @default(uuid())
  email     String   @unique
  name      String?
  createdAt DateTime @default(now())
  notes     Note[]
}
```

### Note è¡¨
```prisma
model Note {
  id        String   @id @default(uuid())
  title     String
  content   String   @db.Text
  embedding Unsupported("vector(768)")?  // Google Gemini embeddings
  createdAt DateTime @default(now())
  author    User     @relation(fields: [authorId], references: [id])
  authorId  String
}
```

## ğŸ” æµ‹è¯•è´¦æˆ·

å½“å‰ä½¿ç”¨ç¡¬ç¼–ç çš„æµ‹è¯•ç”¨æˆ·ï¼ˆç”¨äºæ¼”ç¤ºï¼‰ï¼š
```typescript
userId = "081e3f3d-8888-4252-b747-2635c4013ed7"
email = "dev@localhost"
```

**æ³¨æ„**: ç”Ÿäº§ç¯å¢ƒéœ€è¦é›†æˆçœŸå®çš„ Supabase Authã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
app/
â”œâ”€â”€ page.tsx                    # ä¸»é¡µ & ç¬”è®°ç¼–è¾‘å™¨
â”œâ”€â”€ chat/
â”‚   â””â”€â”€ page.tsx               # AI æé—®é¡µé¢
â”œâ”€â”€ quiz/
â”‚   â””â”€â”€ [noteId]/
â”‚       â””â”€â”€ page.tsx           # ç”Ÿæˆæµ‹éªŒé¡µé¢
â”œâ”€â”€ notes/
â”‚   â”œâ”€â”€ page.tsx               # ç¬”è®°åˆ—è¡¨
â”‚   â””â”€â”€ [noteId]/
â”‚       â””â”€â”€ page.tsx           # ç¬”è®°è¯¦æƒ…
â””â”€â”€ api/
    â”œâ”€â”€ chat/
    â”‚   â””â”€â”€ route.ts           # RAG èŠå¤© API
    â”œâ”€â”€ quiz/
    â”‚   â””â”€â”€ [noteId]/route.ts  # æµ‹éªŒç”Ÿæˆ API
    â””â”€â”€ notes/
        â”œâ”€â”€ route.ts           # ç¬”è®° CRUD
        â””â”€â”€ [noteId]/route.ts  # åˆ é™¤ç¬”è®°
        
components/
â”œâ”€â”€ rich-text-editor.tsx       # ç¬”è®°ç¼–è¾‘å™¨ç»„ä»¶
â”œâ”€â”€ quiz-viewer.tsx            # æµ‹éªŒæ˜¾ç¤ºç»„ä»¶
â””â”€â”€ ui/                        # UI ç»„ä»¶åº“

lib/
â”œâ”€â”€ embeddings.ts              # å‘é‡ç”Ÿæˆå’Œç›¸ä¼¼åº¦è®¡ç®—
â”œâ”€â”€ quiz-generator.ts          # AI å‡ºé¢˜å‡½æ•°
â”œâ”€â”€ prisma.ts                  # Prisma å®¢æˆ·ç«¯
â””â”€â”€ utils.ts                   # å·¥å…·å‡½æ•°
```

## ğŸš€ å¯åŠ¨åº”ç”¨

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# è®¿é—®
http://localhost:3000
```

## ğŸ“ API æ–‡æ¡£

### POST /api/chat
æé—® AI

**è¯·æ±‚:**
```json
{
  "question": "React çš„ç”Ÿå‘½å‘¨æœŸæœ‰å“ªäº›ï¼Ÿ",
  "userId": "user-id"
}
```

**å“åº”:** æµå¼æ–‡æœ¬

### POST /api/quiz/[noteId]
ç”Ÿæˆæµ‹éªŒ

**å“åº”:**
```json
{
  "quiz": [
    {
      "question": "é—®é¢˜æ–‡æœ¬",
      "options": ["é€‰é¡¹1", "é€‰é¡¹2", "é€‰é¡¹3", "é€‰é¡¹4"],
      "correctAnswer": 0
    }
  ]
}
```

### GET /api/notes
è·å–ç¬”è®°åˆ—è¡¨æˆ–å•ä¸ªç¬”è®°

**å‚æ•°:**
- `userId` - ç”¨æˆ· IDï¼ˆè·å–åˆ—è¡¨ï¼‰
- `noteId` - ç¬”è®° IDï¼ˆè·å–å•ä¸ªç¬”è®°ï¼‰

### DELETE /api/notes/[noteId]
åˆ é™¤ç¬”è®°

## ğŸ¯ åç»­ä¼˜åŒ–

- [ ] é›†æˆ Supabase Auth å®ç°çœŸå®è®¤è¯
- [ ] æ·»åŠ ç¬”è®°æ ‡ç­¾å’Œåˆ†ç±»
- [ ] å®ç°å‘é‡ç›¸ä¼¼åº¦æœç´¢ï¼ˆå½“å‰ç®€åŒ–ä¸ºå…¨é‡æŸ¥è¯¢ï¼‰
- [ ] æ·»åŠ ç¬”è®°ç¼–è¾‘åŠŸèƒ½
- [ ] æ”¯æŒç¬”è®°å¯¼å…¥ (PDF/Word)
- [ ] å®ç°å­¦ä¹ è¿›åº¦ç»Ÿè®¡
- [ ] æ·»åŠ å¤šè¯­è¨€æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯å“åº”å¼ä¼˜åŒ–

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¨â€ğŸ’» å¼€å‘è€…

Memoloop Team - 2025

---

**äº«å—æ™ºèƒ½å­¦ä¹ ï¼** ğŸ“âœ¨
